@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== BASE STYLES ===== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ===== UTILITIES ===== */
@layer components {
  /* Layout & Positioning Utilities */
  .flex-center-gap-2 { @apply flex items-center gap-2; }
  .flex-between-center { @apply flex justify-between items-center; }
  
  /* Border Utilities */
  .border-subtle { @apply border border-base-content/10; }
  .border-thick { @apply border-2 border-base-content/20; }
  
  /* Icon Utilities */
  .icon-sm { @apply w-4 h-4; }
  .icon-md { @apply w-5 h-5; }
  .section-icon { @apply w-10 h-10 bg-base-100 rounded-lg border-base-content/20 border-2 flex items-center justify-center; }
  
  /* Container Utilities */
  .container-default { @apply bg-base-100 border-subtle rounded-lg; }

  /* ===== COMPONENTS ===== */
  
  /* Button Components */
  .btn-primary-sm { @apply btn btn-primary btn-sm; }
  .btn-ghost-sm { @apply btn btn-ghost btn-sm; }
  .btn-outline-sm { @apply btn btn-outline btn-sm; }
  .btn-primary-xs { @apply btn btn-primary btn-xs; }
  .btn-ghost-xs { @apply btn btn-ghost btn-xs; }
  
  /* Form Components */
  .input-field { @apply input input-bordered; }
  .form-field { @apply form-control w-full; }
  .input-bordered,
  .textarea-bordered,
  .select-bordered {
    @apply border-2 border-base-content/20 bg-base-200/40;
  }
  
  /* Card Components */
  .card-default { @apply card bg-base-100 shadow; }
  .card-interactive {
    @apply border-2 transition-all duration-200 text-left shadow-md hover:shadow-lg 
           bg-base-100 rounded-lg border-base-content/20 hover:border-secondary/50;
  }
  .card-interactive-selected {
    @apply border-2 transition-all duration-200 text-left shadow-md hover:shadow-lg 
           bg-base-100 rounded-lg border-primary bg-primary/5;
  }

  /* Section Components */
  .section-container {
    @apply bg-base-100 rounded-lg shadow-lg border-2 border-base-content/20;
  }
  .section-header {
    @apply text-lg font-semibold bg-base-200 border-b-2 border-base-content/20 p-4 rounded-t-lg;
  }
  .section-content {
    @apply p-4;
  }
  .section-collapsible {
    @apply bg-base-100 shadow-lg border-2 border-base-content/20;
  }
  .section-collapsible-header {
    @apply text-lg font-semibold bg-base-200 border-b-2 border-base-content/20;
  }

  /* Tab Components */
  /* Base tab sizes (DaisyUI doesn't provide these) */
  .tab-sm {
    @apply flex-shrink-0 rounded-lg min-h-10 px-3 font-bold whitespace-nowrap;
  }
  .tab-lg {
    @apply flex-shrink-0 rounded-lg min-h-16 px-4 font-bold whitespace-nowrap;
  }

  /* Container for tab groups */
  .tabs-container {
    @apply tabs tabs-boxed border-2 border-base-content/20 shadow-sm flex flex-nowrap overflow-x-auto pb-0.5;
  }

  /* Standard tab button (regular size) */
  .tab-button {
    @apply tab tab-sm flex-shrink-0 min-h-10 px-3 font-bold text-sm whitespace-nowrap;
  }

  /* Smaller responsive tab button */
  .tab-button-xs {
    @apply tab tab-sm flex-shrink-0 min-h-10 px-2 sm:px-3 font-bold text-xs sm:text-sm whitespace-nowrap;
  }

  /* Large admin-style tab button */
  .tab-button-admin {
    @apply tab tab-sm sm:tab-lg flex-shrink-0 min-h-14 sm:min-h-16 font-bold text-xs sm:text-base px-3 sm:px-4 whitespace-nowrap;
  }
}

/* ===== SPECIALIZED UTILITIES ===== */

/* Custom scrollbar styles */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Container height management */
.container-height-fix {
  height: calc(100vh - 180px);
  min-height: 300px;
}

@media (min-width: 1450px) {
  .container-height-fix {
    height: calc(100vh - 140px);
    min-height: 400px;
  }
}

/* Virtual scrolling optimization */
.virtual-scroll-container {
  contain: layout style paint;
  will-change: transform;
}

/* Line clamp utilities */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ===== THEME CONSISTENCY OVERRIDES ===== */

/* Global form text color consistency */
.input, .textarea, .select,
input[class*="input"], textarea[class*="textarea"] {
  color: oklch(var(--bc) / 0.7) !important;
}

.input::placeholder, .textarea::placeholder,
input[class*="input"]::placeholder, textarea[class*="textarea"]::placeholder {
  color: oklch(var(--bc) / 0.5) !important;
}

/* ===== NATIVE BROWSER CONTROLS THEMING ===== */

/* Set color scheme based on theme lightness */
[data-theme="light"], [data-theme="cupcake"], [data-theme="bumblebee"],
[data-theme="emerald"], [data-theme="corporate"], [data-theme="retro"],
[data-theme="valentine"], [data-theme="garden"], [data-theme="lofi"],
[data-theme="pastel"], [data-theme="fantasy"], [data-theme="wireframe"],
[data-theme="cmyk"], [data-theme="autumn"], [data-theme="acid"],
[data-theme="lemonade"], [data-theme="winter"] {
  color-scheme: light;
}

[data-theme="dark"], [data-theme="dim"], [data-theme="synthwave"],
[data-theme="cyberpunk"], [data-theme="halloween"], [data-theme="forest"],
[data-theme="aqua"], [data-theme="black"], [data-theme="luxury"],
[data-theme="dracula"], [data-theme="business"], [data-theme="night"],
[data-theme="coffee"], [data-theme="sunset"], [data-theme="nord"] {
  color-scheme: dark;
}

/* Custom themes should detect their base color */
[data-theme*="custom-"] {
  color-scheme: light dark;
}

/* Style native select dropdown options */
select option {
  background-color: oklch(var(--b1)) !important;
  color: oklch(var(--bc)) !important;
  padding: 0.5rem !important;
}

select option:checked,
select option:hover {
  background-color: oklch(var(--p) / 0.2) !important;
  color: oklch(var(--bc)) !important;
}

/* Style datetime-local picker */
input[type="datetime-local"]::-webkit-calendar-picker-indicator {
  background-color: oklch(var(--b2));
  border-radius: 0.25rem;
  padding: 0.25rem;
  cursor: pointer;
  filter: invert(var(--calendar-picker-invert, 0));
}

/* Adjust calendar picker icon for dark themes */
[data-theme="dark"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="dim"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="synthwave"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="cyberpunk"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="halloween"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="forest"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="aqua"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="black"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="luxury"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="dracula"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="business"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="night"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="coffee"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="sunset"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
[data-theme="nord"] input[type="datetime-local"]::-webkit-calendar-picker-indicator {
  filter: invert(1);
}

/* Firefox datetime controls */
input[type="datetime-local"]::-moz-calendar-picker-indicator {
  background-color: oklch(var(--b2));
  border-radius: 0.25rem;
  padding: 0.25rem;
  cursor: pointer;
}

/* Focus states for better visibility */
select:focus,
input[type="datetime-local"]:focus {
  outline: 2px solid oklch(var(--p)) !important;
  outline-offset: 2px !important;
  border-color: oklch(var(--p)) !important;
}

/* Disable animations globally */
.btn, button, input[type="button"], input[type="submit"], input[type="reset"] {
  animation: none !important;
  transform: none !important;
}

/* Theme consistency variables */
:root {
  --rounded-box: 1rem !important;
  --rounded-btn: 0.5rem !important;
  --rounded-badge: 1.9rem !important;
  --animation-btn: 0.25s !important;
  --animation-input: 0.2s !important;
  --btn-focus-scale: 0.95 !important;
  --border-btn: 1px !important;
  --tab-border: 1px !important;
  --tab-radius: 0.5rem !important;
  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1) !important;
  --btn-text-case: none !important;
  --navbar-padding: 0.5rem !important;
}

/* Theme-specific overrides */
[data-theme] .btn {
  text-transform: none !important;
  font-weight: 500 !important;
}


[data-theme] .card { border-radius: 1rem !important; }
[data-theme] .input, [data-theme] .textarea, [data-theme] .select { border-radius: 0.5rem !important; }
[data-theme] .badge { border-radius: 1.9rem !important; }

/* Fix problematic themes */
[data-theme="wireframe"] * { border-color: oklch(var(--bc) / 0.2) !important; }
[data-theme="cyberpunk"] .btn:focus,
[data-theme="cyberpunk"] .input:focus,
[data-theme="cyberpunk"] .textarea:focus {
  box-shadow: 0 0 0 2px oklch(var(--p)) !important;
}